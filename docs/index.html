<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Typing is not just OOP</title><meta charset="UTF-8"></meta><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="my.css" media="screen,projection"></link><link rel="stylesheet" href="highlight.css" media="screen,projection"></link><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress"><div class="step step-level-1" step="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="typing-is-not-just-oop">Typing is not just OOP</h1></div><div class="step step-level-1" step="1" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="types">Types:</h1><ul><li>Correctness</li><li>Semver</li></ul></div><div class="step step-level-1" step="2" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="id1">Types:</h1><ul><li>One-time use</li><li>(Im)mutability</li><li>State Machines</li><li>Efficiency</li><li>Errors</li></ul></div><div class="step step-level-1" step="3" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">fn</span> <span class="nf">parse</span><span class="p">(</span><span class="n">s</span>: <span class="nc">Stream</span><span class="p">)</span><span class="w">
    </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="n">Ast</span><span class="p">,</span><span class="w"> </span><span class="n">ParseError</span><span class="o">&gt;</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="n">unimplemented</span><span class="o">!</span><span class="p">();</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">result</span>
<span class="tag">errors</span></p></div><div class="step step-level-1" step="4" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nb">Result</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">T</span><span class="p">),</span><span class="w">
    </span><span class="nb">Err</span><span class="p">(</span><span class="n">E</span><span class="p">),</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="k">return</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">Ast</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">})</span><span class="w">
</span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">ParseError</span>::<span class="n">new</span><span class="p">())</span></pre><p><span class="tag">enums</span>
<span class="tag">generics</span></p></div><div class="step step-level-1" step="5" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">enum</span> <span class="nc">ParseError</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(</span><span class="n">io</span>::<span class="n">Error</span><span class="p">),</span><span class="w">
    </span><span class="n">UnexpectedCharacter</span><span class="p">,</span><span class="w">
    </span><span class="n">IntError</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cause</span>: <span class="nc">ParseIntError</span><span class="p">,</span><span class="w">
               </span><span class="n">position</span>: <span class="nc">Pos</span><span class="w"> </span><span class="p">},</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">enums</span>
<span class="tag">errors</span>
<span class="tag">error-hierarchy</span></p></div><div class="step step-level-1" step="6" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">match</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(</span><span class="n">io</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">close</span><span class="p">(),</span><span class="w">
    </span><span class="n">UnexpectedCharacter</span><span class="w">
    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s">"bad char"</span><span class="p">),</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">match</span>
<span class="tag">non-exhaustive</span></p></div><div class="step step-level-1" step="7" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><pre class="highlight code rust small"><span class="n">error</span><span class="p">[</span><span class="n">E0004</span><span class="p">]</span>: <span class="nc">non</span><span class="o">-</span><span class="n">exhaustive</span><span class="w"> </span><span class="n">patterns</span>: <span class="err">`</span><span class="n">IntError</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">}</span><span class="err">`</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">covered</span><span class="w">
  </span><span class="o">-</span>-&gt; <span class="nc">src</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">14</span>:<span class="mi">11</span><span class="w">
   </span><span class="o">|</span><span class="w">
</span><span class="mi">6</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">enum</span> <span class="nc">ParseError</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="mi">7</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="n">Io</span><span class="p">(</span><span class="n">io</span>::<span class="n">Error</span><span class="p">),</span><span class="w">
</span><span class="mi">8</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="n">UnexpectedCharacter</span><span class="p">,</span><span class="w">
</span><span class="mi">9</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="n">IntError</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cause</span>: <span class="nc">ParseIntError</span><span class="p">,</span><span class="w">
   </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="o">--------</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">covered</span><span class="w">
</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">                </span><span class="n">position</span>: <span class="nc">Pos</span><span class="w"> </span><span class="p">},</span><span class="w">
</span><span class="mi">11</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">}</span><span class="w">
   </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">_</span><span class="o">-</span><span class="w"> </span><span class="err">`</span><span class="n">ParseError</span><span class="err">`</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">here</span><span class="w">
</span><span class="p">...</span><span class="w">
</span><span class="mi">14</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">match</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="o">|</span><span class="w">             </span><span class="o">^^^</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="err">`</span><span class="n">IntError</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">}</span><span class="err">`</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">covered</span><span class="w">
   </span><span class="o">|</span><span class="w">
   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">handled</span><span class="p">,</span><span class="w">
           </span><span class="n">possibly</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">wildcards</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">arms</span></pre><p><span class="tag">rustc-error</span></p></div><div class="step step-level-1" step="8" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">match</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(</span><span class="n">io</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">close</span><span class="p">(),</span><span class="w">
    </span><span class="n">UnexpectedCharacter</span><span class="w">
    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s">"bad char"</span><span class="p">),</span><span class="w">
    </span><span class="n">IntError</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cause</span><span class="p">,</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s">"bad int: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">cause</span><span class="p">),</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">match</span>
<span class="tag">structural-match</span>
<span class="tag">unused-fields</span></p></div><div class="step step-level-1" step="9" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">new_state</span><span class="p">,</span><span class="w"> </span><span class="n">action</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">(</span><span class="n">Ping</span><span class="p">,</span><span class="w"> </span><span class="n">Leader</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">})</span><span class="w">       </span><span class="o">=&gt;</span><span class="w">  </span><span class="c1">// re-elect
</span><span class="w">    </span><span class="p">(</span><span class="n">Ping</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w">                   </span><span class="o">=&gt;</span><span class="w">  </span><span class="c1">// follow
</span><span class="w">    </span><span class="p">(</span><span class="n">Pong</span><span class="p">,</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="o">@</span><span class="w"> </span><span class="n">Leader</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">})</span><span class="w">  </span><span class="o">=&gt;</span><span class="w">  </span><span class="c1">// count
</span><span class="w">    </span><span class="p">(</span><span class="n">Pong</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w">                   </span><span class="o">=&gt;</span><span class="w">  </span><span class="c1">// re-elect
</span><span class="w">    </span><span class="p">(</span><span class="n">Vote</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">=&gt;</span><span class="w">  </span><span class="c1">// vote
</span><span class="w">    </span><span class="p">(</span><span class="n">Vote</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w">
     </span><span class="n">Electing</span><span class="w"> </span><span class="p">{</span><span class="n">epoch</span><span class="p">,</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">votes_for_me</span><span class="p">,</span><span class="w">
               </span><span class="n">deadline</span><span class="p">,</span><span class="w"> </span><span class="n">needed_votes</span><span class="p">})</span><span class="w"> </span><span class="o">=&gt;</span><span class="w">  </span><span class="c1">// check
</span><span class="w">    </span><span class="p">(</span><span class="n">Vote</span><span class="p">(</span><span class="n">_</span><span class="p">),</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="o">@</span><span class="w"> </span><span class="n">Voted</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">})</span><span class="w">
    </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">Vote</span><span class="p">(</span><span class="n">_</span><span class="p">),</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="o">@</span><span class="w"> </span><span class="n">Leader</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">})</span><span class="w">
    </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">Vote</span><span class="p">(</span><span class="n">_</span><span class="p">),</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="o">@</span><span class="w"> </span><span class="n">Follower</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">=&gt;</span><span class="w">  </span><span class="c1">// discard
</span><span class="p">};</span></pre></div><div class="step step-level-1" step="10" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">host</span>: <span class="nc">a_host</span><span class="p">,</span><span class="w"> </span><span class="n">port</span>: <span class="nc">a_port</span><span class="p">,</span><span class="w">
    </span><span class="n">listen_queue</span>: <span class="nc">_</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w">
</span><span class="kd">let</span><span class="w"> </span><span class="n">Config</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">host</span>: <span class="nc">b_host</span><span class="p">,</span><span class="w"> </span><span class="n">port</span>: <span class="nc">b_port</span><span class="p">,</span><span class="w"> </span><span class="p">..</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">
</span><span class="k">return</span><span class="w"> </span><span class="n">a_host</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b_host</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">a_port</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b_port</span><span class="p">;</span></pre><p><span class="tag">unpacking</span>
<span class="tag">exhaustiveness</span>
<span class="tag">pattern-matching</span></p></div><div class="step step-level-1" step="11" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><pre class="highlight code rust"><span class="cp">#[non_exhaustive]</span><span class="w">
</span><span class="k">enum</span> <span class="nc">ParseError</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(</span><span class="n">io</span>::<span class="n">Error</span><span class="p">),</span><span class="w">
    </span><span class="n">UnexpectedCharacter</span><span class="p">,</span><span class="w">
    </span><span class="n">IntError</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cause</span>: <span class="nc">ParseIntError</span><span class="p">,</span><span class="w">
               </span><span class="n">position</span>: <span class="nc">Pos</span><span class="w"> </span><span class="p">},</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">forward-compatibility</span>
<span class="tag">semver</span></p></div><div class="step step-level-1" step="12" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">match</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(</span><span class="n">io</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">close</span><span class="p">(),</span><span class="w">
    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s">"error: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">),</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">non-exhaustive</span>
<span class="tag">catch-all</span></p></div><div class="step step-level-1" step="13" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">enum</span> <span class="nc">ParseError</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(</span><span class="n">io</span>::<span class="n">Error</span><span class="p">),</span><span class="w">
    </span><span class="n">Lexer</span><span class="p">(</span><span class="nb">Box</span><span class="o">&lt;</span><span class="n">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="p">),</span><span class="w">
    </span><span class="n">Parser</span><span class="p">(</span><span class="nb">Box</span><span class="o">&lt;</span><span class="n">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="p">),</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">errors</span>
<span class="tag">dynamic</span>
<span class="tag">exhaustive</span>
<span class="tag">boxing</span>
<span class="tag">efficiency</span></p></div><div class="step step-level-1" step="14" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">ParserError</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">internal</span>: <span class="nc">InternalError</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="k">enum</span> <span class="nc">InternalError</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(...),</span><span class="w">
    </span><span class="n">Lexer</span><span class="p">(...),</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">visibility</span>
<span class="tag">forward-compatibility</span>
<span class="tag">semver</span></p></div><div class="step step-level-1" step="15" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">ParserError</span><span class="p">(</span><span class="n">InternalError</span><span class="p">);</span><span class="w">
</span><span class="k">pub</span><span class="p">(</span><span class="k">crate</span><span class="p">)</span><span class="w"> </span><span class="k">enum</span> <span class="nc">InternalError</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Io</span><span class="p">(...),</span><span class="w">
    </span><span class="n">Lexer</span><span class="p">(...),</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">new-type</span>
<span class="tag">visibility</span></p></div><div class="step step-level-1" step="16" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">UpstreamName</span><span class="p">(</span><span class="n">Arc</span><span class="o">&lt;</span><span class="kt">str</span><span class="o">&gt;</span><span class="p">);</span><span class="w">
</span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">DownstreamName</span><span class="p">(</span><span class="n">Arc</span><span class="o">&lt;</span><span class="kt">str</span><span class="o">&gt;</span><span class="p">);</span><span class="w">
</span><span class="k">struct</span> <span class="nc">Server</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">up</span>: <span class="nc">Map</span><span class="o">&lt;</span><span class="n">UpstreamName</span><span class="p">,</span><span class="w"> </span><span class="n">Upstream</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="n">down</span>: <span class="nc">Map</span><span class="o">&lt;</span><span class="n">DownstreamName</span><span class="p">,</span><span class="w"> </span><span class="n">Downstream</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">new-type</span>
<span class="tag">arc</span>
<span class="tag">interning</span>
<span class="tag">validation</span></p></div><div class="step step-level-1" step="17" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><pre class="highlight code rust"><span class="cp">#[derive(Clone)]</span><span class="w">
</span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Percentile</span><span class="p">(</span><span class="kt">u16</span><span class="p">);</span><span class="w">
</span><span class="k">impl</span><span class="w"> </span><span class="n">TryFrom</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Percentile</span><span class="w"> </span><span class="p">{...}</span><span class="w">
</span><span class="k">impl</span><span class="w"> </span><span class="nb">Into</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Percentile</span><span class="w"> </span><span class="p">{...}</span><span class="w">
</span><span class="k">fn</span> <span class="nf">get</span><span class="p">(</span><span class="n">perc</span>: <span class="nc">Percentile</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Value</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">return</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">percentiles</span><span class="p">[</span><span class="n">perc</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">new-type</span>
<span class="tag">validation</span>
<span class="tag">performance</span>
<span class="tag">ints</span>
<span class="tag">conversion</span></p></div><div class="step step-level-1" step="18" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Token</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">level</span>: <span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="n">slot</span>: <span class="kt">u32</span> <span class="p">}</span><span class="w">
</span><span class="k">fn</span> <span class="nf">create_timeout</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">Token</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="k">fn</span> <span class="nf">clear_timeout</span><span class="p">(</span><span class="n">tok</span>: <span class="nc">Token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span></pre><p><span class="tag">new-type</span>
<span class="tag">token-pattern</span>
<span class="tag">single-use</span>
<span class="tag">linear-types</span></p></div><div class="step step-level-1" step="19" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">tx</span><span class="p">,</span><span class="w"> </span><span class="n">rx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">channel</span>::<span class="n">oneshot</span><span class="p">();</span><span class="w">
</span><span class="n">thread</span>::<span class="n">spawn</span><span class="p">(</span><span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">rx</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="p">});</span></pre><p><span class="tag">single-use</span>
<span class="tag">linear-types</span>
<span class="tag">move</span>
<span class="tag">threading</span></p></div><div class="step step-level-1" step="20" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><pre class="highlight code rust small"><span class="n">error</span><span class="p">[</span><span class="n">E0382</span><span class="p">]</span>: <span class="nc">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">moved</span><span class="w"> </span><span class="n">value</span>: <span class="err">`</span><span class="n">tx</span><span class="err">`</span><span class="w">
  </span><span class="o">-</span>-&gt; <span class="nc">src</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">23</span>:<span class="mi">9</span><span class="w">
   </span><span class="o">|</span><span class="w">
</span><span class="mi">22</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">tx</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">
   </span><span class="o">|</span><span class="w">         </span><span class="o">--</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">moved</span><span class="w"> </span><span class="n">here</span><span class="w">
</span><span class="mi">23</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">tx</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w">
   </span><span class="o">|</span><span class="w">         </span><span class="o">^^</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="k">move</span><span class="w">
   </span><span class="o">|</span><span class="w">
   </span><span class="o">=</span><span class="w"> </span><span class="n">note</span>: <span class="nc">move</span><span class="w"> </span><span class="n">occurs</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="err">`</span><span class="n">tx</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="k">type</span> <span class="err">`</span><span class="n">Sender</span><span class="err">`</span><span class="p">,</span><span class="w">
           </span><span class="n">which</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="nb">Copy</span><span class="err">`</span><span class="w"> </span><span class="k">trait</span></pre><p><span class="tag">linear-types</span>
<span class="tag">move</span>
<span class="tag">rustc-error</span></p></div><div class="step step-level-1" step="21" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">start_with</span><span class="p">(</span><span class="s">"x"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">map</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="o">&amp;</span><span class="n">key</span><span class="p">);</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">borrow-checker</span>
<span class="tag">ownership</span></p></div><div class="step step-level-1" step="22" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><pre class="highlight code rust small"><span class="n">error</span><span class="p">[</span><span class="n">E0502</span><span class="p">]</span>: <span class="nc">cannot</span><span class="w"> </span><span class="n">borrow</span><span class="w"> </span><span class="err">`</span><span class="n">m</span><span class="err">`</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">mutable</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="err">\</span><span class="w">
              </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">borrowed</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">immutable</span><span class="w">
 </span><span class="o">-</span>-&gt; <span class="nc">src</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">7</span>:<span class="mi">13</span><span class="w">
  </span><span class="o">|</span><span class="w">
</span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="o">|</span><span class="w">                       </span><span class="o">---</span><span class="w">
  </span><span class="o">|</span><span class="w">                       </span><span class="o">|</span><span class="w">
  </span><span class="o">|</span><span class="w">                       </span><span class="n">immutable</span><span class="w"> </span><span class="n">borrow</span><span class="w"> </span><span class="n">occurs</span><span class="w"> </span><span class="n">here</span><span class="w">
  </span><span class="o">|</span><span class="w">                       </span><span class="n">immutable</span><span class="w"> </span><span class="n">borrow</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">here</span><span class="w">
</span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">starts_with</span><span class="p">(</span><span class="s">"x"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">map</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="o">&amp;</span><span class="n">key</span><span class="p">);</span><span class="w">
  </span><span class="o">|</span><span class="w">             </span><span class="o">^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">mutable</span><span class="w"> </span><span class="n">borrow</span><span class="w"> </span><span class="n">occurs</span><span class="w"> </span><span class="n">here</span></pre><p><span class="tag">borrow-checker</span>
<span class="tag">rustc-error</span></p></div><div class="step step-level-1" step="23" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><pre class="highlight code rust"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">start_with</span><span class="p">(</span><span class="s">"x"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">map</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="o">&amp;</span><span class="n">key</span><span class="p">);</span><span class="w">
        </span><span class="k">break</span><span class="p">;</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></pre><p><span class="tag">borrow-checker</span>
<span class="tag">ownership</span>
<span class="tag">nll</span></p></div><div class="step step-level-1" step="24" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashMap</span>::<span class="n">new</span><span class="p">();</span><span class="w">
</span><span class="n">x</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"key1"</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w">
</span><span class="n">x</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"key2"</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w">
</span><span class="kd">let</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">new</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w">
</span><span class="n">thread1_channel</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">shared</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span><span class="w">
</span><span class="n">thread2_channel</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">shared</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span></pre><p><span class="tag">mutability</span>
<span class="tag">shared-state</span></p></div><div class="step step-level-1" step="25" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">new</span><span class="p">(</span><span class="n">Mutex</span>::<span class="n">new</span><span class="p">(</span><span class="n">x</span><span class="p">));</span><span class="w">
</span><span class="n">thread</span>::<span class="n">spawn</span><span class="p">(</span><span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span>: <span class="nc">MutexGuard</span><span class="o">&lt;</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w">
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shared</span><span class="p">.</span><span class="n">lock</span><span class="p">()</span><span class="w">
    </span><span class="n">x</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"x"</span><span class="p">);</span><span class="w">
</span><span class="p">})</span></pre><p><span class="tag">mutability</span>
<span class="tag">shared-mutable-state</span>
<span class="tag">raii</span>
<span class="tag">lifetime</span></p></div><div class="step step-level-1" step="26" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="n">gil</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Python</span>::<span class="n">acquire_gil</span><span class="p">();</span><span class="w">
</span><span class="kd">let</span><span class="w"> </span><span class="n">py</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gil</span><span class="p">.</span><span class="n">python</span><span class="p">();</span><span class="w">
</span><span class="kd">let</span><span class="w"> </span><span class="n">dic1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PyDict</span>::<span class="n">new</span><span class="p">(</span><span class="n">py</span><span class="p">);</span><span class="w">
</span><span class="n">dic1</span><span class="p">.</span><span class="n">set_item</span><span class="p">(</span><span class="n">py</span><span class="p">,</span><span class="w">
    </span><span class="s">"key1"</span><span class="p">,</span><span class="w"> </span><span class="n">PyInt</span>::<span class="n">new</span><span class="p">(</span><span class="n">py</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">))</span><span class="o">?</span><span class="p">;</span></pre><p><span class="tag">python</span>
<span class="tag">token-pattern</span>
<span class="tag">lifetime</span></p></div><div class="step step-level-1" step="27" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashMap</span>::<span class="n">new</span><span class="p">();</span><span class="w">
</span><span class="n">a</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"x"</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="kd">let</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashMap</span>::<span class="n">new</span><span class="p">();</span><span class="w">
</span><span class="n">b</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"key1"</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">);</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">moved</span><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">insert</span><span class="p">()</span><span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">error</span><span class="w">
</span><span class="n">b</span><span class="p">.</span><span class="n">get_mut</span><span class="p">(</span><span class="s">"key1"</span><span class="p">).</span><span class="n">insert</span><span class="p">(</span><span class="s">"y"</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span></pre><p><span class="tag">recursive-mutability</span></p></div><div class="step step-level-1" step="28" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TcpStream</span>::<span class="n">connect</span><span class="p">(</span><span class="s">"localhost:1234"</span><span class="p">);</span><span class="w">
</span><span class="n">a</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">b"test"</span><span class="p">);</span><span class="w">
</span><span class="n">a</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">buf</span><span class="p">);</span></pre><p><span class="tag">sharing</span>
<span class="tag">sockets</span></p></div><div class="step step-level-1" step="29" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BufStream</span>::<span class="n">new</span><span class="p">(</span><span class="w">
    </span><span class="n">TcpStream</span>::<span class="n">connect</span><span class="p">(</span><span class="s">"localhost:1234"</span><span class="p">));</span><span class="w">
</span><span class="n">a</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">);</span><span class="w">
</span><span class="n">a</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">b"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span><span class="w">
</span><span class="n">a</span><span class="p">.</span><span class="n">read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">buf</span><span class="p">);</span></pre><p><span class="tag">sharing</span>
<span class="tag">buffering</span>
<span class="tag">mutation</span></p></div><div class="step step-level-1" step="30" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="48000" data-y="0" data-z="0"><pre class="highlight code rust"><span class="kd">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BufStream</span>::<span class="n">new</span><span class="p">(</span><span class="w">
    </span><span class="n">TcpSocket</span>::<span class="n">connect</span><span class="p">(</span><span class="s">"localhost:1234"</span><span class="p">));</span><span class="w">
</span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="n">tx</span><span class="p">,</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">rx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">split</span><span class="p">();</span><span class="w">
</span><span class="n">thread</span>::<span class="n">spawn</span><span class="p">(</span><span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">#</span><span class="w"> </span><span class="n">rx</span><span class="p">.</span><span class="n">write</span><span class="p">()</span><span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">method</span><span class="w">
    </span><span class="n">rx</span><span class="p">.</span><span class="n">read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">buf</span><span class="p">);</span><span class="w">
</span><span class="p">})</span><span class="w">
</span><span class="n">tx</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">);</span><span class="w">
</span><span class="n">tx</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">b"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span></pre><p><span class="tag">sharing</span>
<span class="tag">buffering</span>
<span class="tag">mutation</span></p></div><div class="step step-level-1" step="31" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="49600" data-y="0" data-z="0"><h1 id="inherent-mutability">Inherent mutability</h1><ul><li>tuple vs list</li><li>volatile-mutable</li><li>hashable?</li><li>performance</li></ul></div><div class="step step-level-1" step="32" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="51200" data-y="0" data-z="0"><h1 id="rust-style-mutability">Rust-style mutability</h1><ul><li>user decides</li><li>initial prefill is fast</li><li><tt>map1[map2] = val</tt> is fine</li></ul></div><div class="step step-level-1" step="33" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="52800" data-y="0" data-z="0"><h1 id="shared-mutable-state">Shared Mutable State</h1><ul><li>Rust fixes shared</li><li>Clojure fixes mutable</li></ul></div><div class="step step-level-1" step="34" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="54400" data-y="0" data-z="0"><h1 id="conclusion">Conclusion</h1><ul><li>Perfect API &#x2190; Unbreakable invariants</li><li>Be creative!</li></ul></div></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>